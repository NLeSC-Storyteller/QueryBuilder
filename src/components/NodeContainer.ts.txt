import * as React         from 'react';
import { connect }        from 'react-redux';

import { DatabaseRecord } from '../DatabaseRecord';

import './node.css';

const mapStateToProps = () => {
    // input parameter 'state' is provided by <Provider>
    // (no state mapping required here)
};

const mapDispatchToProps = () => {
    // input parameter 'dispatch' is provided by <Provider>
};

type props = {
    dbrecord: DatabaseRecord
};

class NodeContainer extends React.Component<props, any> {

    static propTypes = {
        dbrecord: React.PropTypes.object
    };

    static paddingPerLevel: number = 30;
    public dbrecord: DatabaseRecord;
    public isexpanded: boolean;

    constructor(dbrecord: DatabaseRecord, isexpanded: boolean = false) {
        super();

        if ((dbrecord.is_entity && dbrecord.is_instance) || (!dbrecord.is_entity && !dbrecord.is_instance)) {
            throw new Error('is_entity and is_instance cannot both be false or true');
        } else {
            this.dbrecord = dbrecord;
        }
        this.isexpanded = isexpanded;
    }

    public getClass(): string {

        let nodeclass = '';
        if (this.dbrecord.is_instance) {
            nodeclass += 'instance';
        } else if (this.dbrecord.is_entity) {
            nodeclass += 'entity';
        } else {
            throw new Error('Unknown clause');
        }
        return nodeclass;
    }

}

connect(mapStateToProps, mapDispatchToProps)(Node);
